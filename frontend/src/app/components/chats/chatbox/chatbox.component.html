<!-- Chat Header -->
<header class="flex bg-white h-[12dvh] text-gray-700 border-b border-gray-300">
  <button type="button" class="cursor-pointer h-full w-[8%] min-w-[60px] hover:bg-gray-50 text-center flex items-center justify-center border-r border-gray-300" routerLink="/chats">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
      <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
    </svg>
  </button>
  <h1 class="text-2xl cursor-pointer font-semibold hover:bg-gray-50 p-6 height w-[92%] flex gap-4 items-center" [routerLink]="'/profile/' + chat.senderUsername" >
    <img [src]="chat.senderProfileImage" [alt]="chat.senderName" class="w-10 h-10 rounded-full"/>
    {{chat.senderName}}
  </h1>
</header>

<!-- Chat Messages -->
<div class="overflow-y-auto px-4 py-12 pt-6 h-[66dvh]">

  @for (message of chat.chatMessages; track message; let i = $index) {
    <app-chatmessage [senderName]="message.sender" [senderProfileImage]="chat.senderProfileImage" [outgoingMessage]="message.outgoing" [isPrevSame]="isPrevSame[i]" [message]="message.message"></app-chatmessage>
  }

</div>
<!-- Chat Input -->
<footer class="bg-white border-t border-gray-300 p-4 flex items-center absolute bottom-0 right-0 left-0 h-[12dvh]">
  <div class="flex items-center w-full">
    <input #messageContent (keydown.enter)="sendMessage()" type="text" placeholder="Type a message..." class="w-full p-3 border border-gray-300 focus:outline-none rounded-tl-md rounded-bl-md">
    <button (click)="sendMessage()" class="cursor-pointer bg-indigo-500 text-white px-4 py-2 rounded-tr-md rounded-br-md border border-indigo-500">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-8">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5" />
      </svg>
    </button>
  </div>
</footer>
